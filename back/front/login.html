<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="stilologin.css">
</head>
<body>
    <div id="login">Login</div>
    <input type="text" placeholder="Usuario" id="usuario">
    <input type="text" placeholder="Correo" id="email">
    <input type="password" placeholder="Clave" id="clave">

    <button id="Ingresar">Ingresar</button>
    <button id="Registrarse" onclick="regis()">Registrarse</button>

    <script src="mainlog.js"></script>
    <script>
        document.getElementById('Ingresar').addEventListener('click', function() {
            let usuario = document.getElementById('usuario').value;
            let email = document.getElementById('email').value;
            let clave = document.getElementById('clave').value;

            // Objeto con los datos del usuario
            let data = {
                usuario: usuario,
                correo: email,
                clave: clave
            };

            // Configurar la solicitud fetch para enviar los datos al servidor
            fetch(`http://localhost:4000/usuarios`)
            .then(response => response.json())
            .then(data => {
                if (data && data.length > 0) {
                    alert("Usuario encontrado Iniciando Sesion");
                    // Habilitar el formulario si el cÃ³digo es correcto
                    document.location.href="http://192.168.1.108:4000/admin";
                    
                } else {
                    throw new Error("Usuario no encontrado");
                }
            })
            .catch(err => {

                alert('Usuario incorrecto vuelva a intentarlo');
                usuario="";
                email="";
                clave="";

            });

            
        });
    </script>
</body>
</html>